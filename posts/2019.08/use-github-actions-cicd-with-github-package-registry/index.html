<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="/common/favicon.ico">
    
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/common/site.css">
    
    
    <title>mazgi.log :: æ–°ã—ã„GitHub Actionsã¨GitHub Package Registryã§CI/CD(ã‚µãƒ³ãƒ—ãƒ«ã‚ã‚Š)</title>
    <meta property="og:title"       content="mazgi.log :: æ–°ã—ã„GitHub Actionsã¨GitHub Package Registryã§CI/CD(ã‚µãƒ³ãƒ—ãƒ«ã‚ã‚Š)" />
    <meta property="og:type"        content="article" />
    
    <meta property="og:url"         content="https://mazgi.github.io/posts/2019.08/use-github-actions-cicd-with-github-package-registry/" />
    
      
      <meta property="og:description" content="mazgi&#39;s tech blog" />
      
    
    
    
    
    <meta property="og:image"       content="https://mazgi.github.io/posts/2019.08/use-github-actions-cicd-with-github-package-registry/og.png" />
    <meta property="twitter:image"  content="https://mazgi.github.io/posts/2019.08/use-github-actions-cicd-with-github-package-registry/og.png" />
    <meta property="twitter:image:src"  content="https://mazgi.github.io/posts/2019.08/use-github-actions-cicd-with-github-package-registry/og.png" />
    
    
    
    
    
    
    
    
    <meta name="twitter:card"       content="summary" />
    
    
  </head>
  <body>
    <header class="navbar navbar-expand-lg navbar-dark bg-dark">
      
      <span class="navbar-text mr-1">I am on</span>
      
      <ul class="navbar-nav">
        
        <li class="nav-item">
          <a class="nav-link" target="github_mazgi" href="https://github.com/mazgi">GitHub<i class="ml-1 fab fa-github"></i></a>
        </li>
        
        
        <li class="nav-item">
          <a class="nav-link" target="twitter_mazgi" href="https://twitter.com/@mazgi">Twitter<i class="ml-1 fab fa-twitter"></i></a>
        </li>
        
        
        <li class="nav-item">
          <a class="nav-link" target="instagram_mazgi" href="https://www.instagram.com/mazgi">Instagram<i class="ml-1 fab fa-instagram"></i></a>
        </li>
        
        
      </ul>
    </header>
    <nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="https://mazgi.github.io/">mazgi.log</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_nav" aria-controls="navbar_nav" aria-expand="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbar_nav">
        
        <ul class="navbar-nav mr-auto">
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbar_dropdown_lang" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              ç¿»è¨³ã‚’è¡¨ç¤º
            </a>
            <div class="dropdown-menu" aria-labelledby="navbar_dropdown_lang">
              
              <a class="dropdown-item" href="https://mazgi.github.io/en/posts/2019.08/use-github-actions-cicd-with-github-package-registry/">
                <span class="badge badge-light">English</span>
                Use Github Actions Cicd With Github Package Registry
              </a>
              
            </div>
          </li>
          
          
          
          <li class="nav-item">
            <span class="nav-link disabled">Created At: 2019.08.18</span>
          </li>
          <li class="nav-item">
            <span class="nav-link disabled">Updated At: 2019.08.24</span>
          </li>
          
        </ul>
        
        <div class="navbar-nav ml-auto">
          <span class="navbar-text mr-1">share this page via</span>
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="https://twitter.com/share?url=https%3a%2f%2fmazgi.github.io%2fposts%2f2019.08%2fuse-github-actions-cicd-with-github-package-registry%2f&text=%e6%96%b0%e3%81%97%e3%81%84GitHub%20Actions%e3%81%a8GitHub%20Package%20Registry%e3%81%a7CI%2fCD%28%e3%82%b5%e3%83%b3%e3%83%97%e3%83%ab%e3%81%82%e3%82%8a%29" target="_blank"><i class="fab fa-twitter"></i></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fmazgi.github.io%2fposts%2f2019.08%2fuse-github-actions-cicd-with-github-package-registry%2f" target="_blank"><i class="fab fa-facebook"></i></a></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fmazgi.github.io%2fposts%2f2019.08%2fuse-github-actions-cicd-with-github-package-registry%2f&title=%e6%96%b0%e3%81%97%e3%81%84GitHub%20Actions%e3%81%a8GitHub%20Package%20Registry%e3%81%a7CI%2fCD%28%e3%82%b5%e3%83%b3%e3%83%97%e3%83%ab%e3%81%82%e3%82%8a%29" target="_blank"><i class="fab fa-linkedin"></i></a></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://plusone.google.com/_/+1/confirm?url=https%3a%2f%2fmazgi.github.io%2fposts%2f2019.08%2fuse-github-actions-cicd-with-github-package-registry%2f" target="_blank"><i class="fab fa-google-plus"></i></a></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://b.hatena.ne.jp/entry/https://mazgi.github.io/posts/2019.08/use-github-actions-cicd-with-github-package-registry/" target="_blank">b!</a>
            </li>
          </ul>
        </div>
        
      </div>
    </nav>
    <main role="main" class="container-fluid col-lg-10 offset-lg-1">

<div class="row">
  <div class="col-lg-9">
    <article>
      <div class="row">
        <h1>æ–°ã—ã„GitHub Actionsã¨GitHub Package Registryã§CI/CD(ã‚µãƒ³ãƒ—ãƒ«ã‚ã‚Š)</h1>
      </div>
      

<p>ã‚ã‚ŠãŒãŸã„ã“ã¨ã«<a href="https://github.com/features/actions">GitHub Actions(beta)</a>ã¨<a href="https://github.com/features/package-registry">GitHub Package Registry(beta)</a>ä¸¡æ–¹ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<h1 id="about">About</h1>

<p>çµ¶è³›limited public betaãªGitHub Actionsã§ã™ãŒæ—¢ã«2ä¸–ä»£å­˜åœ¨ã—ã¾ã™ã€‚</p>

<ul>
<li><code>/.github/*.workflow</code> ã‚’HCLã§æ›¸ãã‚‚ã®

<ul>
<li><em>å¿˜ã‚Œã¾ã—ã‚‡ã†</em></li>
</ul></li>
<li><code>/.github/workflows/*.yml</code> ã‚’æ›¸ãã‚‚ã®

<ul>
<li>ã“ã®è¨˜äº‹ã§ã¯ã“ã¡ã‚‰ã®ã¿æ‰±ã„ã¾ã™</li>
<li>CI/CDã§ãã‚‹ï¼</li>
<li><a href="https://azure.microsoft.com/en-us/services/devops/pipelines/">Azure Pipelines</a>ã§<a href="https://help.github.com/en/articles/virtual-environments-for-github-actions#about-virtual-environments">å‹•ã„ã¦ã„ã¦</a>Ubuntu, macOS, Windowsã§ä¸¦åˆ—å®Ÿè¡Œã§ãã‚‹ï¼</li>
</ul></li>
</ul>

<p>ã§ã™ã®ã§ã€ã‚‚ã—ã“ã®ç”»åƒã®ãƒšãƒ¼ã‚¸ã«ãŸã©ã‚Šã¤ã„ã¦ã—ã¾ã£ãŸã‚‰ãƒã‚ºãƒ¬ã§ã™ã€‚<br />
<a href="https://help.github.com/en/articles/about-github-actions">https://help.github.com/en/articles/about-github-actions</a> ã«è¡Œãã¾ã—ã‚‡ã†ã€‚</p>

<figure>
    <img src="0020.png"/> 
</figure>


<p>ã¾ãŸGitHub Package Registryã®æ¦‚è¦ã¯<a href="/posts/2019.06/publish-docker-image-to-github-package-registry/">Docker imageã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰pushã™ã‚‹è¨˜äº‹</a>ã‚‚ã”å‚ç…§ãã ã•ã„ã€‚</p>

<h1 id="examples">Examples</h1>

<p>ã‚µãƒ³ãƒ—ãƒ«ã¯ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™ã€‚</p>

<p><a href="https://github.com/mazgi/201908.github-actions-cicd-examples">201908.github-actions-cicd-examples</a></p>

<p>GitHub Actionsã®å®Ÿè¡Œçµæœã¯GitHubã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚Œã°<a href="https://github.com/mazgi/201908.github-actions-cicd-examples/actions">Actionsã‚¿ãƒ–</a>ã‹ã‚‰è¦‹ã‚Œã¾ã™ã€‚<br />
æœªãƒ­ã‚°ã‚¤ãƒ³ã ã¨public repositoryã§ã‚‚ä»Šã®ã¨ã“ã‚404ã«ãªã‚Šã¾ã™ã€‚</p>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ãªã‚‹ã»ã©ã€æœªãƒ­ã‚°ã‚¤ãƒ³ã ã¨404ã§ã™ã­<br>ã‚¿ãƒ–ã‚‚å‡ºãªã„<br>ä»•æ§˜ã‹èª¿æ•´ä¸­ã‹ã¯ä¸æ˜ã§ã™ãŒ <a href="https://t.co/TPRz96ZuRg">pic.twitter.com/TPRz96ZuRg</a></p>&mdash; Hidenori Matsuki (@mazgi) <a href="https://twitter.com/mazgi/status/1161126959381827585?ref_src=twsrc%5Etfw">August 13, 2019</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>å„workflowã®yamlã¨å†…å®¹ã¯ã–ã£ã¨ä»¥ä¸‹ã§ã™ã€‚</p>

<ul>
<li><a href="https://github.com/mazgi/201908.github-actions-cicd-examples/blob/master/.github/workflows/basic-01-environment.yml">/.github/workflows/basic-01-environment.yml</a>

<ul>
<li><code>strategy</code> ã‚’ä½¿ã£ã¦macOS, Ubuntuä¸¡æ–¹ã§jobã‚’å®Ÿè¡Œã™ã‚‹</li>
<li>commit hashã‚’æŒ‡å®šã—ã¦actionã‚’ä½¿ã†</li>
<li><code>name</code> ãªã©ã§emojiã‚„è¨˜å·ã‚’ä½¿ã£ã¦ã¿ã‚‹</li>
<li><a href="https://help.github.com/en/articles/contexts-and-expression-syntax-for-github-actions"><code>GitHub Context</code></a>ã‚’å–å¾—ã™ã‚‹</li>
<li><a href="https://help.github.com/en/articles/virtual-environments-for-github-actions#environment-variables">&ldquo;default environment variables&rdquo;</a>ã‚’å‚ç…§ã™ã‚‹</li>
<li>ç’°å¢ƒå¤‰æ•°ã¨Bashã®Parameter Expansionã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†</li>
</ul></li>
<li><a href="https://github.com/mazgi/201908.github-actions-cicd-examples/blob/master/.github/workflows/docker-01-build.yml">/.github/workflows/docker-01-build.yml</a>

<ul>
<li><code>Dockerfile</code> ã‹ã‚‰Docker imageã‚’buildã™ã‚‹</li>
<li>buildã—ãŸDocker imageã‚’GitHub Package Registryã«<a href="https://github.com/mazgi/201908.github-actions-cicd-examples/packages/16273">publish</a>ã™ã‚‹</li>
</ul></li>
<li><a href="https://github.com/mazgi/201908.github-actions-cicd-examples/blob/master/.github/workflows/xcode-01-macos-app.yml">/.github/workflows/xcode-01-macos-app.yml</a>

<ul>
<li><code>xcodebuild</code> ã§macOSã‚¢ãƒ—ãƒªã‚’build &amp;&amp; archiveã™ã‚‹</li>
<li>DMGã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦archiveã—ãŸmacOSã‚¢ãƒ—ãƒªã‚’æ ¼ç´ã™ã‚‹</li>
<li>tagå¥‘æ©Ÿã®å®Ÿè¡Œã§ã‚ã‚Œã°ä½œã£ãŸDMGã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’<a href="https://github.com/mazgi/201908.github-actions-cicd-examples/releases">release</a>ã®assetã¨ã—ã¦uploadã™ã‚‹</li>
</ul></li>
</ul>

<h2 id="status-badge">Status badge</h2>

<p>åŒåƒšã«æ•™ãˆã¦ã„ãŸã ã„ãŸã®ã§ã™ãŒ</p>

<p><code>https://github.com/${NAMESPACE}/${REPOSITORY}/workflows/${WORKFLOW_NAME}/badge.svg</code></p>

<p>ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒãƒ‚ãŒå–ã‚Œã¾ã™ã€‚</p>

<figure>
    <img src="0040.png"/> 
</figure>


<p>æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ <strong><code>${WORKFLOW_NAME}</code> ã¯workflowãƒ•ã‚¡ã‚¤ãƒ«åã§ã¯ãªã <code>name</code> ã§æŒ‡å®š</strong> ã™ã‚‹ã‚ˆã†ã§ã™ã€‚</p>

<p>ã—ãŸãŒã£ã¦ <code>/.github/workflows/basic-01-environment.yml</code> ã«</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">name:<span style="color:#bbb"> </span><span style="color:#4070a0">&#34;Basic 01: Environment&#34;</span></code></pre></div>
<p>ã¨æ›¸ã„ãŸå ´åˆã€badgeã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã¯ <code>basic-01-environment</code> ã§ã¯ãªã <code>Basic%2001%3A%20Environment</code> ã¨æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>

<p>ä»Šå›ã®ä¾‹ã§ã‚ã‚Œã° <code>https://github.com/mazgi/201908.github-actions-cicd-examples/workflows/Basic%2001%3A%20Environment/badge.svg</code> ã¿ãŸã„ãªæ„Ÿã˜ã§ã™ã­ã€‚<br />
<em>&hellip;workflowåã‚’ã‚‚ã†å°‘ã—ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚Œã°ã‚ˆã‹ã£ãŸã€‚</em></p>

<h1 id="that-s-all">That&rsquo;s all</h1>

<p>ç§ã¯ <code>Context</code> ã§å–ã‚Œã‚‹ã‚‚ã®ã‚’èª¿ã¹ãŸã‚Šã¡ã‚‡ã£ã¨ã—ãŸæ›¸ãæ–¹ã§ãƒãƒã£ã¦ã—ã¾ã£ã¦æ™‚é–“ã‚’è²»ã‚„ã—ãŸã®ã§ã€ã“ã®è¨˜äº‹ãŒã©ãªãŸã‹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p>

<p>ã¾ãŸ <a href="https://github.com/ruby/ruby">github.com/ruby/ruby</a> ã®workflowã¯ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚<br />
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ ğŸ™</p>

<p>GitHub Actionsã¯ç‰¹ã« <code>on</code> ã§æ€ã£ãŸé€šã‚Šã«ç™ºç«ã—ãªã„ã¨ã‹ <code>[skip ci]</code> çš„ãªã“ã¨ã§ããªã•ãã†ã¨ã‹betaãªã“ã¨ã‚‚ã‚ã‚Šè‰²ã€…ã¨è©¦è¡ŒéŒ¯èª¤ã—ã¦ã„ã¾ã™ãŒã€ç·ã˜ã¦ã¨ã¦ã‚‚ä¾¿åˆ©ãªæ©Ÿèƒ½ã ã¨æ„Ÿã˜ãŸã®ã§å¼•ãç¶šãã˜ã‚ƒã‚“ã˜ã‚ƒã‚“ä½¿ã‚ã›ã¦ã„ãŸã ãã¾ã™ ğŸ’ª</p>

    </article>
  </div>
  <div class="col-lg-3">
    <div class="sidebar">
  
  <h4><a href="/about/">About</a></h4>
  <p><strong>Hidenori MATSUKI</strong></p>

<p>ğŸ£ ğŸ¶</p>

<p>another website: <a href="https://mazgi.com/">mazgi.com</a></p>
  
  <hr />
  <h4>TableOfContents</h4>
  <nav id="TableOfContents">
<ul>
<li><a href="#about">About</a></li>
<li><a href="#examples">Examples</a>
<ul>
<li><a href="#status-badge">Status badge</a></li>
</ul></li>
<li><a href="#that-s-all">That&rsquo;s all</a></li>
</ul>
</nav>
  <hr />
  <h4><a href="/categories/">Categories</a></h4>
  
  <hr />
  <h4><a href="/tags/">Tags</a></h4>
  
  <div>
    
    <a class="badge badge-pill badge-secondary" href="/tags/docker/">docker</a>
    
    <a class="badge badge-pill badge-secondary" href="/tags/github/">github</a>
    
    <a class="badge badge-pill badge-secondary" href="/tags/github-actions/">github actions</a>
    
    <a class="badge badge-pill badge-secondary" href="/tags/github-package-registry/">github package registry</a>
    
  </div>
  
</div>

  </div>
</div>
      <div class="row">
        <footer class="col-lg-12">
          <hr/>
          <span>&copy; mazgi.log</span>
          <span>&nbsp;&middot;&nbsp;</span>
          <i class="fas fa-bolt"></i>
          <span>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a></span>
        </footer>
      </div>
    </div>
    </main>
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-68170979-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-68170979-2');
    </script>
    
      
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
    </script>
  </body>
</html>

